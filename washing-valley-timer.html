<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <title>æ´—è¡£æœºæ³¢è°·é¢„çº¦è®¡ç®—å™¨</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f7fa;
      padding: 96px 24px;
    }

    .card {
      max-width: 760px;
      margin: auto;
      background: #fff;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
    }

    h1 {
      font-size: 20px;
      margin-bottom: 16px;
    }

    .row {
      margin-bottom: 12px;
    }

    label {
      display: block;
      margin-bottom: 4px;
    }

    input {
      padding: 6px 8px;
      font-size: 14px;
    }

    .value {
      font-size: 16px;
    }

    .hint {
      color: #666;
      font-size: 13px;
    }

    #delayHours {
      font-weight: 600;
      font-size: 20px;
      font-family: 'DSEG7', monospace;
      font-size: 64px;
      letter-spacing: 4px;
      color: #1aff00;
      /* ç»å…¸è§å…‰ç»¿ */
      background: #021402;
      /* LCD æ·±è‰²èƒŒæ™¯ */
      padding: 12px 20px;
      border-radius: 6px;
      box-shadow:
        inset 0 0 10px rgba(0, 0, 0, .8),
        0 0 12px rgba(0, 255, 0, .3);
      width: fit-content;
    }
  </style>
</head>

<body>
  <div class="card">
    <h1>ğŸ§º ç”µè´¹æ³¢è°·æ´—è¡£é¢„çº¦å®šæ—¶</h1>

    <div class="row">
      <label>æ³¢è°·ç”µä»·æ—¶æ®µ</label>
      <input type="time" id="start" value="21:00" /> ï½
      <input type="time" id="end" value="08:00" />
    </div>

    <div class="row">
      <label>å½“å‰æ—¶é—´</label>
      <div class="value" id="now">--</div>
    </div>

    <div class="row">
      <label>å¯è®¾ç½®é¢„çº¦å°æ—¶æ•°</label>
      <div class="value" id="delayHours">--</div>
    </div>

    <div class="row">
      <label>é¢„è®¡æ´—è¡£å®Œæˆæ—¶é—´</label>
      <div class="value" id="finish">--</div>
    </div>
  </div>

  <script>
    function pad(n) {
      return n.toString().padStart(2, '0');
    }

    function formatDate(d, withSeconds = false) {
      const y = d.getFullYear();
      const m = pad(d.getMonth() + 1);
      const day = pad(d.getDate());
      const h = pad(d.getHours());
      const min = pad(d.getMinutes());
      const s = pad(d.getSeconds());
      return withSeconds
        ? `${y}-${m}-${day} ${h}:${min}:${s}`
        : `${y}-${m}-${day} ${h}:${min}`;
    }

    function getValleyEnd(now) {
      const endInput = document.getElementById('end').value;
      const [eh, em] = endInput.split(':').map(Number);

      const end = new Date(now);
      end.setHours(eh, em, 0, 0);

      // å¦‚æœç»“æŸæ—¶é—´æ—©äºå½“å‰æ—¶é—´ï¼Œè¯´æ˜æ˜¯â€œæ¬¡æ—¥â€
      if (end <= now) {
        end.setDate(end.getDate() + 1);
      }
      return end;
    }

    function tick() {
      const now = new Date();
      document.getElementById('now').textContent = formatDate(now, true);

      const valleyEnd = getValleyEnd(now);
      const diffMs = valleyEnd - now;

      let hours = Math.floor(diffMs / (1000 * 60 * 60));
      if (hours < 0) hours = 0;

      document.getElementById('delayHours').textContent = hours + ' H';

      const finish = new Date(now.getTime() + hours * 60 * 60 * 1000);
      document.getElementById('finish').textContent = formatDate(finish);
    }

    tick();
    setInterval(tick, 1000);
  </script>
</body>

</html>